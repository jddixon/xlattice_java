<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_91) on Thu May 26 16:23:39 PDT 2016 -->
<title>BuildMaker</title>
<meta name="date" content="2016-05-26">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="BuildMaker";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BuildMaker.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/xlattice/crypto/builds/BuildList.html" title="class in org.xlattice.crypto.builds"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/xlattice/crypto/builds/BuildMakerMain.html" title="class in org.xlattice.crypto.builds"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/xlattice/crypto/builds/BuildMaker.html" target="_top">Frames</a></li>
<li><a href="BuildMaker.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.xlattice.crypto.builds</div>
<h2 title="Class BuildMaker" class="title">Class BuildMaker</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.xlattice.crypto.builds.BuildMaker</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">BuildMaker</span>
extends java.lang.Object</pre>
<div class="block">Utility for creating from a set of files (a) a BuildList and optionally 
 (b) a directory of data-keyed files.  The BuildList contains a
 list of file names and the associated SHA1-based content keys.
 
 If created, the directory contains a snapshot, a copy, of the
 file set in which the copy of each file is named by its content key.
 This directory may be flat, or it may contain 256 subdirectories, or 
 it may contain 256x16 subdirectories.  

 In the second case, each subdirectory has a name corresponding to the 
 hex values <b>00</b> through <b>ff</b>, and a file is stored in the 
 subdirectory corresponding to the value of the first byte of its SHA1 key.  

 In the third case, subdirectories <b>00</b> through <b>ff</b> each have
 sub-subdirectories named <b>0</b> through <b>f</b>, and files are stored 
 in the directory whose concatenated path name corresponds to the first 12
 bits of their keys.  So if the hex value of the file's key begins with
 <b>0xabcd</b>, the file will be found in the directory <b>ab/c</b>.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Jim Dixon</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/xlattice/crypto/builds/BuildMaker.html#BAD_DIR">BAD_DIR</a></span></code>
<div class="block">Storage strategies, doubtless to be elaborated.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/xlattice/crypto/builds/BuildMaker.html#BAD_FILENAMES">BAD_FILENAMES</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/xlattice/crypto/builds/BuildMaker.html#BAD_TITLES">BAD_TITLES</a></span></code>
<div class="block">unacceptable titles</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/xlattice/crypto/builds/BuildMaker.html#BUFSIZE">BUFSIZE</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/xlattice/crypto/builds/BuildMaker.html#DIR256">DIR256</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/xlattice/crypto/builds/BuildMaker.html#DIR256x16">DIR256x16</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/xlattice/crypto/builds/BuildMaker.html#DISCOVER">DISCOVER</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/xlattice/crypto/builds/BuildMaker.html#FLAT">FLAT</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/xlattice/crypto/builds/BuildMaker.html#NO_DIR">NO_DIR</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/xlattice/crypto/builds/BuildMaker.html#SCRATCH_DIRECTORY">SCRATCH_DIRECTORY</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/xlattice/crypto/builds/BuildMaker.html#THIS_DIR">THIS_DIR</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../org/xlattice/crypto/builds/BuildMaker.html#BuildMaker-org.xlattice.crypto.RSAKey-org.xlattice.crypto.RSAPublicKey-java.lang.String-java.lang.String-int-java.lang.String-">BuildMaker</a></span>(<a href="../../../../org/xlattice/crypto/RSAKey.html" title="class in org.xlattice.crypto">RSAKey</a>&nbsp;key,
          <a href="../../../../org/xlattice/crypto/RSAPublicKey.html" title="class in org.xlattice.crypto">RSAPublicKey</a>&nbsp;pubKey,
          java.lang.String&nbsp;title,
          java.lang.String&nbsp;src,
          int&nbsp;strategy,
          java.lang.String&nbsp;targ)</code>
<div class="block">Create a BuildList from all of the files in and below a given
 directory.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../org/xlattice/crypto/builds/BuildMaker.html#BuildMaker-org.xlattice.crypto.RSAKey-org.xlattice.crypto.RSAPublicKey-java.lang.String-java.lang.String-java.lang.String:A-int-java.lang.String-">BuildMaker</a></span>(<a href="../../../../org/xlattice/crypto/RSAKey.html" title="class in org.xlattice.crypto">RSAKey</a>&nbsp;key,
          <a href="../../../../org/xlattice/crypto/RSAPublicKey.html" title="class in org.xlattice.crypto">RSAPublicKey</a>&nbsp;pubKey,
          java.lang.String&nbsp;title,
          java.lang.String&nbsp;src,
          java.lang.String[]&nbsp;files,
          int&nbsp;strategy,
          java.lang.String&nbsp;targ)</code>
<div class="block">Get ready to make a BuildList.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/xlattice/crypto/builds/BuildMaker.html#add-java.lang.String-">add</a></span>(java.lang.String&nbsp;name)</code>
<div class="block">Add a file name to the set.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected byte[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/xlattice/crypto/builds/BuildMaker.html#contentHash-java.io.File-">contentHash</a></span>(java.io.File&nbsp;in)</code>
<div class="block">Read a file to determine its content hash.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../../org/xlattice/crypto/builds/BuildList.html" title="class in org.xlattice.crypto.builds">BuildList</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/xlattice/crypto/builds/BuildMaker.html#makeBuildList--">makeBuildList</a></span>()</code>
<div class="block">Create the build list and optionally add copies of files
 named in the list to a hash file directory.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/xlattice/crypto/builds/BuildMaker.html#quickCheckTarget--">quickCheckTarget</a></span>()</code>
<div class="block">If the directory target (with name targetName) exists, 
 return its type.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/xlattice/crypto/builds/BuildMaker.html#size--">size</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/xlattice/crypto/builds/BuildMaker.html#slowCheckTarget--">slowCheckTarget</a></span>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="BAD_TITLES">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BAD_TITLES</h4>
<pre>public static final&nbsp;java.lang.String[] BAD_TITLES</pre>
<div class="block">unacceptable titles</div>
</li>
</ul>
<a name="BAD_FILENAMES">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BAD_FILENAMES</h4>
<pre>public static final&nbsp;java.lang.String[] BAD_FILENAMES</pre>
</li>
</ul>
<a name="BAD_DIR">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BAD_DIR</h4>
<pre>public static final&nbsp;int BAD_DIR</pre>
<div class="block">Storage strategies, doubtless to be elaborated.  Compression
 is the obvious extension.

 XXX CURRENTLY ONLY NO_DIR AND FLAT ARE SUPPORTED XXX</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.xlattice.crypto.builds.BuildMaker.BAD_DIR">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="DISCOVER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DISCOVER</h4>
<pre>public static final&nbsp;int DISCOVER</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.xlattice.crypto.builds.BuildMaker.DISCOVER">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="NO_DIR">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NO_DIR</h4>
<pre>public static final&nbsp;int NO_DIR</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.xlattice.crypto.builds.BuildMaker.NO_DIR">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="FLAT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FLAT</h4>
<pre>public static final&nbsp;int FLAT</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.xlattice.crypto.builds.BuildMaker.FLAT">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="DIR256">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DIR256</h4>
<pre>public static final&nbsp;int DIR256</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.xlattice.crypto.builds.BuildMaker.DIR256">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="DIR256x16">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DIR256x16</h4>
<pre>public static final&nbsp;int DIR256x16</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.xlattice.crypto.builds.BuildMaker.DIR256x16">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="SCRATCH_DIRECTORY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SCRATCH_DIRECTORY</h4>
<pre>public static final&nbsp;java.lang.String SCRATCH_DIRECTORY</pre>
</li>
</ul>
<a name="THIS_DIR">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>THIS_DIR</h4>
<pre>public static final&nbsp;java.lang.String THIS_DIR</pre>
</li>
</ul>
<a name="BUFSIZE">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BUFSIZE</h4>
<pre>public static final&nbsp;int BUFSIZE</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.xlattice.crypto.builds.BuildMaker.BUFSIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="BuildMaker-org.xlattice.crypto.RSAKey-org.xlattice.crypto.RSAPublicKey-java.lang.String-java.lang.String-java.lang.String:A-int-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BuildMaker</h4>
<pre>public&nbsp;BuildMaker(<a href="../../../../org/xlattice/crypto/RSAKey.html" title="class in org.xlattice.crypto">RSAKey</a>&nbsp;key,
                  <a href="../../../../org/xlattice/crypto/RSAPublicKey.html" title="class in org.xlattice.crypto">RSAPublicKey</a>&nbsp;pubKey,
                  java.lang.String&nbsp;title,
                  java.lang.String&nbsp;src,
                  java.lang.String[]&nbsp;files,
                  int&nbsp;strategy,
                  java.lang.String&nbsp;targ)
           throws org.xlattice.CryptoException,
                  java.io.IOException</pre>
<div class="block">Get ready to make a BuildList.  If the storage strategy is 
 NO_DIR, no key files will be generated.  Otherwise, each data
 file will be hashed and its contents stored in a subdirectory 
 of the target directory in a file whose name is derived from 
 the base64-encoded content key.  A copy of the build list 
 itself is also stored in the target directory, twice: once
 under its content key and again under its title key, the SHA1
 key derived from the RSA public key and the title.

 The title of the build list is a unique name for the set
 of files.  Whoever supplies the RSA key used to create the
 build list is responsible for ensuring the uniqueness of 
 the name during the lifetime of the RSA key.  The title
 may not be null or empty.  It is desirable that it contain
 a substring that is likely to be globally unique, such as
 a fully qualified domain name.  <b>www.xlattice.org</b> is
 such a name.  It <b>should</b> contain a version number;
 if appropriate, it should also contain a <b>branch</b> name.
 A language identifier such as <b>java</b> or <b>cpp</b> might 
 be useful in some contexts.  It <b>should not</b> contain a
 build number.

 A more elaborate example is then 
   <b>org.xlattice.util-foo-0.3.6 java</b>
 This is version <b>0.3.6</b> of the <b>foo</b> branch of the 
 Java package <b>org.xlattice.util</b>.
 
 The source directory is where the files used in the build 
 list are located.  This expressed as a path from the current
 location.  If a web site were being build in target/docs, for
 example, this would be the <code>src</code> argument to the 
 constructor.
 
 The file names must be relative to that path.  This path (the
 title) is UNIX-style, using a forward slash as a separator.  
 The last character in the path must be a forward slash.  If it
 is missing, it is added.

 If the storage strategy is other than NO_DIR, the BuildList is
 automatically added to the <b>t/<b> subdirectory of the target 
 directory under its title key, the SignedList hash.

 In this implementation if there is an existing BuildList with
 the same title key in the target directory (set) it will be 
 silently overwritten if and only if the timestamp on the 
 existing BuildList is earlier than the timestamp of this 
 BuildList.
 
 In this implementation strategy title-keyed items and 
 content-keyed items in separate directories (<b>t/</b> and 
 <b>c</b> respectively).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - RSA key used to sign the list</dd>
<dd><code>pubKey</code> - corresponding RSA public key</dd>
<dd><code>title</code> - unique name for BuildList</dd>
<dd><code>src</code> - path to source directory</dd>
<dd><code>files</code> - array of names of files to be added to the BuildList</dd>
<dd><code>strategy</code> - target directory structure, integer code</dd>
<dd><code>targ</code> - name of target directory that data gets copied to</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>org.xlattice.CryptoException</code></dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="BuildMaker-org.xlattice.crypto.RSAKey-org.xlattice.crypto.RSAPublicKey-java.lang.String-java.lang.String-int-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BuildMaker</h4>
<pre>public&nbsp;BuildMaker(<a href="../../../../org/xlattice/crypto/RSAKey.html" title="class in org.xlattice.crypto">RSAKey</a>&nbsp;key,
                  <a href="../../../../org/xlattice/crypto/RSAPublicKey.html" title="class in org.xlattice.crypto">RSAPublicKey</a>&nbsp;pubKey,
                  java.lang.String&nbsp;title,
                  java.lang.String&nbsp;src,
                  int&nbsp;strategy,
                  java.lang.String&nbsp;targ)
           throws org.xlattice.CryptoException,
                  java.io.IOException</pre>
<div class="block">Create a BuildList from all of the files in and below a given
 directory.  If the strategy is other than NO_DIR, the files are
 copied into the target directory with names derived from their
 content keys.

 XXX Currently any strategy other than NO_DIR is treated as though
 XXX it were FLAT.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - RSA key used to sign the list</dd>
<dd><code>pubKey</code> - corresponding RSA public key</dd>
<dd><code>src</code> - path to source directory</dd>
<dd><code>title</code> - unique name for BuildList</dd>
<dd><code>strategy</code> - integer code for target directory structure</dd>
<dd><code>targ</code> - name of target directory that data gets copied to</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>org.xlattice.CryptoException</code></dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="size--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>size</h4>
<pre>public&nbsp;int&nbsp;size()</pre>
</li>
</ul>
<a name="add-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>add</h4>
<pre>public&nbsp;void&nbsp;add(java.lang.String&nbsp;name)</pre>
<div class="block">Add a file name to the set.  The name is the path relative to
 the source directory.  For example, if the source directory is
 A/B and the file is A/B/C/D, then the name passed is C/D.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>name</code> - file name including path from source directory</dd>
</dl>
</li>
</ul>
<a name="contentHash-java.io.File-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>contentHash</h4>
<pre>protected final&nbsp;byte[]&nbsp;contentHash(java.io.File&nbsp;in)
                            throws java.io.IOException</pre>
<div class="block">Read a file to determine its content hash.  If copying, 
 write the file to the tmp directory.

 XXX If there is already a file with this hash in the
 XXX target directory, should not overwrite it.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>in</code> - data file, guaranteed to exist</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="makeBuildList--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>makeBuildList</h4>
<pre>public&nbsp;<a href="../../../../org/xlattice/crypto/builds/BuildList.html" title="class in org.xlattice.crypto.builds">BuildList</a>&nbsp;makeBuildList()
                        throws org.xlattice.CryptoException,
                               java.io.IOException</pre>
<div class="block">Create the build list and optionally add copies of files
 named in the list to a hash file directory.  If copying, 
 also store a serialized copy of the build file in that 
 hash copy directory.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>org.xlattice.CryptoException</code></dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="quickCheckTarget--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>quickCheckTarget</h4>
<pre>public&nbsp;int&nbsp;quickCheckTarget()
                     throws java.io.IOException</pre>
<div class="block">If the directory target (with name targetName) exists, 
 return its type.  Checking is cursory.  If the directory 
 does not exist, return NO_DIR.  If there is any obvious
 error, return BAD_DIR.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="slowCheckTarget--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>slowCheckTarget</h4>
<pre>public&nbsp;int&nbsp;slowCheckTarget()
                    throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BuildMaker.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/xlattice/crypto/builds/BuildList.html" title="class in org.xlattice.crypto.builds"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/xlattice/crypto/builds/BuildMakerMain.html" title="class in org.xlattice.crypto.builds"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/xlattice/crypto/builds/BuildMaker.html" target="_top">Frames</a></li>
<li><a href="BuildMaker.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
